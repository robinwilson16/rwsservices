function initialiseState(){var n=document.querySelector(".GetNotificationsButton");if("showNotification"in ServiceWorkerRegistration.prototype){if(Notification.permission==="denied"){n.disabled=!0;console.warn("The user has blocked notifications.");return}}else{n.disabled=!0;console.warn("Notifications aren't supported.");return}if(!("PushManager"in window)){n.disabled=!0;console.warn("Push messaging isn't supported.");return}navigator.serviceWorker.ready.then(function(t){t.pushManager.getSubscription().then(function(t){if(n.checked=!0,!t){n.checked=!1;return}}).catch(function(n){console.warn("Error during getSubscription()",n)})})}function subscribeUser(){var n=document.querySelector(".GetNotificationsButton");return new Promise(function(n,t){const i=Notification.requestPermission(function(t){n(t)});i&&i.then(n,t)}).then(function(t){if(t!=="granted"){n.checked=!1;throw new Error("Notification permission was not granted.");}else processSubscription()})}function unsubscribeUser(){navigator.serviceWorker.ready.then(function(n){n.pushManager.getSubscription().then(function(n){n.unsubscribe().then(function(){alert("You have been successfully unsubscribed and will recieve no further notifications from this site.")}).catch(function(){alert("Sorry, there was an error removing your subscription.\nClick to the left of the address bar if you wish to block notications from this site.");pushButton.checked=!0})}).catch(function(n){console.error("Error during getSubscription()",n)})})}function processSubscription(){navigator.serviceWorker.ready.then(function(n){const t={userVisibleOnly:!0,applicationServerKey:urlBase64ToUint8Array("BNcoqSRgSD_ASSk4PVqR91tJ0SdVUkW3u3mhEkGiAAV5YLEr98pQkUs9afu6KJAOteGWL9tNNE4okoWi8vUQRG0")};return n.pushManager.subscribe(t)}).then(function(n){return console.log("Received PushSubscription: ",JSON.stringify(n)),n})}function urlBase64ToUint8Array(n){const r="=".repeat((4-n.length%4)%4),u=(n+r).replace(/\-/g,"+").replace(/_/g,"/"),t=window.atob(u),i=new Uint8Array(t.length);for(let n=0;n<t.length;++n)i[n]=t.charCodeAt(n);return i}$(function(){return $(".carousel.lazy").on("slide.bs.carousel",function(n){var t;t=$(n.relatedTarget).find("img[data-src]");t.attr("src",t.data("src"));t.removeAttr("data-src")})});$(".scrollAnchor a").click(function(n){var t,i;n.preventDefault();t=$(this).attr("href");t[0]!="#"?window.location.href=t:(i=$(t).offset().top,$("html,body").animate({scrollTop:i},400))});initialiseState();$(".GetNotificationsButton").click(function(){var t=$(this).is(":disabled"),n=$(this).is(":checked");n?subscribeUser():unsubscribeUser()});$(".GetNotifications").click(function(){var n=$(".GetNotificationsButton").is(":disabled"),t=$(this).is(":checked");n&&alert("You previously blocked this website from showing notifications.\nClick to the left of the address bar to re-enable.")});