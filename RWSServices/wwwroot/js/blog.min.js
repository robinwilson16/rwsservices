function siteResourcesOnClick(){$("#ResourceGalleryTabContent").click(function(n){var r=$(n.target).attr("class"),t,i;if(r.includes("img-thumbnail")){n.preventDefault();$("#ResourceGalleryModal").modal("hide");t=$(n.target).attr("src");i=$(n.target).attr("alt");const r='<img src="'+t+'" class="img-fluid" alt="'+i+'" />',u=ckEditor.data.processor.toView(r),f=ckEditor.data.toModel(u);ckEditor.model.insertContent(f,ckEditor.model.document.selection)}})}function siteUrlsOnClick(){$(".siteUrls").click(function(n){n.preventDefault();var t=$(n.target).attr("href"),i=$(n.target).html();ckEditor.model.change(n=>{const r=ckEditor.model.document.selection.getFirstPosition();n.insertText(i,{linkHref:t},r)})})}function emojisOnClick(){$(".Emojis").click(function(n){var t=$(n.target).text();$(n.target).attr("class").includes("Emoji")&&ckEditor.model.change(n=>{const i=ckEditor.model.document.selection.getFirstPosition();n.insertText(t,i)})})}function reloadSiteResourcesGallery(){var n=$("#UploadFolder").val();$("#ItemResources").load("/FileUpload/Files?subfolder="+n,function(n){console.log("Item File Gallery Loaded",n)});$("#GlobalResources").load("/FileUpload/Files/?subfolder=SiteAssets",function(n){console.log("Global File Gallery Loaded",n)})}function reloadEmojis(){$("#Emojis").load("/Emoji/",function(n){console.log("Emoji Gallery Loaded",n)})}function setProgressBar(n){$("#FileUploadProgress").attr("aria-valuenow",n);$("#FileUploadProgress").attr("style","width: "+n+"%");$("#FileUploadProgress").html(n+"%")}var ckEditor;ClassicEditor.create(document.querySelector(".editor")).then(n=>{console.log("CKEditor initialised",n),ckEditor=n}).catch(n=>{console.error(n)});$("#AddSiteResourcesForm").submit(function(n){var e,i,u,o,t;n.preventDefault();e=$("#UploadFolder").val();$("#FileUploadModal").modal("hide");$("#UploadProgressModalCloseButton").hide();$("#UploadProgressModal").modal("show");setProgressBar(0);var r=new FormData,s=document.getElementById("FilesToUpload"),f=s.files;for(i=0;i<f.length;i++)(u=f[i],o=Math.round(100/f.length*(i+1)),u.type.match("image.*"))&&(r.append("files",u,u.name),setProgressBar(o));r.append("__RequestVerificationToken",$("input[name=__RequestVerificationToken]").val());r.append("subfolder",e);t=new XMLHttpRequest;t.open("POST","/FileUpload/UploadFiles/1",!0);t.onload=function(){t.status===200?(console.log(t.responseText),reloadSiteResourcesGallery(),$("#UploadProgressModalCloseButton").show()):console.error(t.responseText)};t.send(r)});$("#ResourceGalleryModal").on("shown.bs.modal",function(){reloadSiteResourcesGallery()});$("#EmojiModal").on("shown.bs.modal",function(){reloadEmojis()});siteResourcesOnClick();siteUrlsOnClick();emojisOnClick();